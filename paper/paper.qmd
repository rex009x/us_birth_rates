---
title: "From Trends to Truth: A Comprehensive Analysis Revealing Contributing Factors Behind Declining US Birth Rates"
#subtitle: "My subtitle if needed"
author: Maroosh Gillani, Aaron Liu & Jimmy Luc
thanks: "Code and data are available at: https://github.com/rex009x/us_birth_rates/tree/master/data. Selected aspects of the original paper that underpins this paper were reproduced and a record of this is available at: https://www.socialsciencereproduction.org/reproductions/bfe97499-4c05-466f-8cb5-fbedc27a83a1/index "
date: today
date-format: long
abstract: "Over the last couple of years, the American population has been witnessing a steady decline in their birth rates, as suggested by the American Economic Association's article 'The Puzzle of Falling US Birth Rates since the Great Recession' by Kearney, Levine, and Pardue (2020). Through the analysis of multiple different factors, such as age and education, we notice a continual decline in birth rate starting from the year 2007. We discover how different social, cultural, and economic shifts play a part in this worrying trend. This paper demonstrates how socioeconomic trends in the recent years have affected Americans, and how these patterns represented through data have played a key role in the irreversible downward trajectory of US birth rates."
format:
  pdf:
    fig-pos: "H"
toc: true
number-sections: true
bibliography: references.bib
---
```{r, include=FALSE, warning=FALSE, message=FALSE}
# workplace setup
library(tidyverse)
library(dplyr)
library(ggplot2)
library(here)
library(haven)

# acquire fig 1 data from fig_1.csv
fig_1_data <- 
  read.csv(file=here("data/fig_1.csv"))

# acquire fig 2a data from figs_2a_2b.csv
fig_2a_data <-
  read.csv((file=here("data/figs_2a_2b.csv")))

fig_2a_data <- fig_2a_data %>% select(year, brate_1519, brate_2024, brate_2529, brate_3034, brate_3539, brate_4044)

fig_2a_data_long <- fig_2a_data %>%
  pivot_longer(cols = -year, names_to = "Age_Group", values_to = "Birth_Rate")

# acquire fig 2d data from figs_1_2_3.csv
fig_2d_data <-
  read.csv((file=here("data/figs_1_2_3.csv")))

fig_2d_data <- fig_2d_data %>% select(year, brate_hsdropout,	brate_hsgrad,	brate_somecol,	brate_colgrad)

fig_2d_data <- na.omit(fig_2d_data)

fig_2d_data_long <- fig_2d_data %>%
  pivot_longer(cols = -year, names_to = "Education_Level", values_to = "Birth_Rate")

# acquire figure 2F data from NCHS Natality Microdata's nchs_births_pop_1990_2019.dta and SEER's age_race_comp_seer.dta
nchs_births_data <- read_dta(here("data/nchs_births_pop_1990_2019.dta"))
seer_data <- read_dta(here("data/age_race_comp_seer.dta"))

merged_data <- merge(nchs_births_data, seer_data, by = c("stname", "year"))

merged_data <- merged_data %>%
  mutate(
    brate_firstbirth = merged_data$numbirth_firstbirth / merged_data$pop1544 * 1000,
    brate_secondbirth = merged_data$numbirth_secondbirth / merged_data$pop1544 * 1000,
    brate_thirdbirth = merged_data$numbirth_thirdbirth / merged_data$pop1544 * 1000,
    brate_fourthbirth = merged_data$numbirth_fourthbirth / merged_data$pop1544 * 1000
  ) %>%
  select(year, starts_with("brate_"))

merged_data_long <- merged_data %>%
  pivot_longer(cols = -year, names_to = "Parity", values_to = "Birth_Rate")

# acquire fig 5 data from nchs_cohort_analysis.dta
# acquire figure 5 data from CDC SEER's agecomp-seer.dta
seer_cohort_data <- 
  read_dta(here("data/agecomp-seer.dta"))

nchs_cohort_data <- 
  read_dta(here("data/nchs_cohort_analysis.dta"))

# code to replicate figure 5 from: https://github.com/KCtt457/us-birth-rates-decline
# Process population data to aggregate by cohort
fig5_pop_data1 <- seer_cohort_data %>%
  select(1:32) %>%
  select(-c(stname)) %>%
  group_by(year) %>%
  summarise(across(everything(),sum)) # https://stackoverflow.com/questions/1660124/how-to-sum-a-variable-by-group

fig5_pop_data1 <- fig5_pop_data1 %>%
  pivot_longer(-c(year), names_to = "mage", values_to = "pop")

fig5_pop_data1 <- fig5_pop_data1 %>%
  mutate(mage = as.numeric(str_replace(mage, "fem", ""))) %>%
  mutate(cohort = year - mage) %>%
  mutate(cohort2 = case_when(cohort >= 1968 & cohort <=1972 ~ 1,
                             cohort >= 1973 & cohort <=1977 ~ 2,
                             cohort >= 1978 & cohort <=1982 ~ 3,
                             cohort >= 1983 & cohort <=1987 ~ 4,
                             cohort >= 1988 & cohort <=1992 ~ 5,
                             cohort >= 1993 & cohort <=1997 ~ 6)
         )

fig5_pop_data1 <- na.omit(fig5_pop_data1)
fig5_pop_data1 <- fig5_pop_data1 %>%
  group_by(cohort2, mage) %>%
  summarise(pop = sum(pop))

# Join dataframes for population and birth data
nchs_cohort_data <- full_join(nchs_cohort_data, fig5_pop_data1, by=c("mage", "cohort2")) %>%
  mutate(cohort_years = case_when(cohort2 == 1 ~ "1968-1972",
                                  cohort2 == 2 ~ "1973-1977",
                                  cohort2 == 3 ~ "1978-1982",
                                  cohort2 == 4 ~ "1983-1987",
                                  cohort2 == 5 ~ "1988-1992",
                                  cohort2 == 6 ~ "1993-1997")
         )

# Calculate birth rates
nchs_cohort_data <- nchs_cohort_data %>%
  mutate(brate=numbirth/pop*1000,
         age_20_24_year = case_when(cohort2 == 1 ~ 1992,
                                    cohort2 == 2 ~ 1997,
                                    cohort2 == 3 ~ 2002,
                                    cohort2 == 4 ~ 2007,
                                    cohort2 == 5 ~ 2012,
                                    cohort2 == 6 ~ 2017)
         )

# Calculate cumulative birth rates for each cohort
nchs_cohort_data <- nchs_cohort_data %>%
  group_by(cohort2) %>%
  mutate(cum_brate = cumsum(brate)/1000, 
         cohort_years = case_when(cohort2 == 1 ~ "1968-1972",
                                  cohort2 == 2 ~ "1973-1977",
                                  cohort2 == 3 ~ "1978-1982",
                                  cohort2 == 4 ~ "1983-1987",
                                  cohort2 == 5 ~ "1988-1992",
                                  cohort2 == 6 ~ "1993-1997")
         ) 

```

\newpage
# Introduction

The United States has been experiencing heavy fluctuations in birth rates for nearly half a century with constant decline since 2007. The birth rate of a country is representative of its socioeconomic state, political state, and future prosperity. Furthermore, it determines the decision-making and distribution of government resources, education, health care services, and urban planning. This alarming issue leaves many seeking an explanation as to what exactly is causing this phenomenon. While people may point fingers at the ever changing societal norm, evolving ideology on family structure, or to no fault but the government, this paper aims to expose the possible explanations to the plummeting birth rate in the United States of America.

The nations birth rate has fallen significantly since 2007, dropping but about 23% by 2022, measured by number of births per 1000 women [@citeAxios] and that birth rates tend to fall as based on the economy. 2007 marks the start of the most severe economic crisis the world has ever faced, spanning the years 2007 until 2009. The events of this crisis has had long lasting damage on the economy, with unemployment doubling and the crash of the housing market [@citeFDR]. These poor economic conditions and the unusually slow recovery of the economy would play a large role in the decision to have children, as an unpredictable economic environment makes people feel less secure about raising a family, thus contributing to the recorded decline in birth rates. This is just one of various factors that we will be exploring in this paper to observe any trends and correlations between societal and economic shifts and the dwindling birth rate in the US.

Throughout the rest of this paper, we will be delving into the statistics with regards to birth rates in the US and observe any trends we can find. In the data and results sections of this paper, we examine, analyze, and reproduce the information reported by the authors by downloading and cleaning the data sets provided in the replication package. After that, we will look into the results sections to look for trends and other insights that can be uncovered from our research, and finally discuss and summarize all of our findings in the conclusion.

# Data

## Data Source and Collection

The datasets for this paper were acquired through the American Economic Association's paper "The Puzzle of Falling US Birth Rates since the Great Recession" [@citeOriginalReplication], with the aid of data available from Centers for Disease Control, and Prevention (CDC) Natality data [@citeCDCNCHS] and CDC SEER U.S. Population Data [@citeCDCSeer]. The data sources were accessed on February 12th, 2024 and acts as the foundation of this paper. The data sources themselves are a collaborative effort including but not limited to the U.S. Census Bureau, the National Cancer Institute, SEER Data, CDC, and the National Center for Health Statistics (NCHS). The United States census is legally mandated by the United States Constitution which occurs every 10 years. The data is largely comprised of `numeric` values representing years, birth rates by race and ethnicity, marital status, education, age, and birth parity, or `character` values representing US states.

All data collection and analysis was done using statistical tools and data visualization program R [@citeR] and Rstudio IDE [@citeRStudio] to help streamline the workflow. The analysis was done using the R program and the following supporting packages `tidyverse` [@citeTidyverse], `haven` [@citeHaven], `ggplot2` [@citeGgplot2], `here` [@citeHere], `ggthemes` [@citeGgthemes], and `dplyr` [@citeDplyr]. We will provide more comprehensive details about the data cleaning, and analysis in the following subsections.

## Variables of Interest
Although the data contains an abundance of information, we are mainly concerned of US birth rates per year, the total female population, and various other factors including age, mother's level of education, and birth parity (number of children for a given women). As this paper focuses on birth rates in the US over the course of time, we have all the necessary and sufficient information required to proceed processing the data for our analysis.

## Data Processing

# Results

@fig-1 showcases the trajectory of US birth rates spanning from 1980 to 2020, focusing on births per 1000 women aged 15 to 44. The peak occurred in 1990, reaching 70.9 births per 1000 women, closely followed by 2007 with 69.3 births per 1000 women. In contrast, 2020 marked the lowest point with only 55.8 births per 1000 women. From 1980 to 2007, the birth rate experienced moderate fluctuations, with a maximum variance of 7.3 births per 1000 women. However, following the year 2007, the birth rate seems to display a consistent a downward trend, declining by 13.5 births per 1000 women between 2007 and 2020.

```{r graph1, fig.cap="Trend in US Birth Rates from 1980 - 2020"}
#| echo: false
#| message: false
#| warning: false
#| label: fig-1

# replicate figure 1 from the original paper
fig_1_data %>% ggplot(aes(x = year, y = brate_all)) +
  geom_line(color = "#378bd4", size = 1) +
  labs(x = "Year", y = "Births per 1,000 women age 15-44") +
  scale_y_continuous(limits = c(50,80), breaks = seq(50, 80, by = 5)) +
  scale_x_continuous(limits = c(1980,2020), breaks = seq(1980, 2020, by = 5)) +
  theme_classic()
```

Examining the trends in birth rates by five-year age groups reveals intriguing patterns. 

In the 15 - 19 years old age group, there has been a consistent decline in birth rates, punctuated by a brief period of growth from 1986 to 1991, peaking at 61.8 births per 1000 women in 1991 before steadily declining to its lowest recorded rate of 15.3 births per 1000 women in 2020.

The 20-24 years old age group remained relatively stable from 1980 to 2007, reaching a peak of 116.5 births per 1000 women in 1990. However, it has experienced a consistent decline from 2007 onward, reaching a low of 62.8 births per 1000 women in 2020.

Similarly, the 25-29 years old age group displayed stability until 2007, with the highest birth rate of 120.2 births per 1000 women recorded in 1990. Despite a gradual decline post-2007, it retained a relatively higher birth rate compared to younger age groups, hitting a low of 90.0 births per 1000 women in 2020.

In contrast, the 30-34 years old age group witnessed a steady increase in birth rates over time, starting from 61.9 births per 1000 women in 1980 and peaking at 102.7 births per 1000 women in 2016.

The 35-39 years old age group also experienced steady growth, with birth rates ranging from a low of 40.5 births per 1000 women in 1980 to a high of 52.8 births in 2019.

The 40-44 years old age group displayed minimal change, remaining relatively steady over the years, with slight increases noted annually. The lowest birth rate was recorded in 1980 at 8.1 births per 1000 women, rising to 12.0 births per 1000 women in 2019.

Analyzing the data in @fig-2a, the 25 - 29 years old age group consistently led in birth rates until being surpassed by the 30 - 34 years old age group in 2016. Conversely, the 40-44 years old age group consistently exhibited the lowest birth rates. However, with declining births in the 15-19 years old age group and a stable, increasing trend in the 40-44 years old age group, a shift in the age group with the lowest birth rate may soon occur for the first time in 40 years.

Additionally, a noteworthy trend is the steady decline in birth rates among younger age groups from around 2007 onwards, while the older age groups have experienced the opposite trend.

```{r graph2a, fig.cap="Trends in Birth Rates by Five-year Age Group"}
#| echo: false
#| message: false
#| warning: false
#| label: fig-2a

# replicate figure 2a from the original paper
fig_2a_data_long %>% ggplot(aes(x = year, y = Birth_Rate, color = Age_Group)) +
  geom_line(size = 1) +
  labs(x = "Year", y = "Births per 1,000 women in \n relevant population subgroup", color = "Age Group") +
  scale_y_continuous(limits = c(0, 140), breaks = seq(0, 150, by = 20)) +
  scale_x_continuous(limits = c(1980, 2020), breaks = seq(1980, 2020, by = 5)) +
  geom_text(aes(x = 1985, y = 120), label = "Age 25-29", color = "#00ba38") +
  geom_text(aes(x = 1985, y = 100), label = "Age 20-24", color = "#b79f00") +
  geom_text(aes(x = 1985, y = 80), label = "Age 30-34", color = "#00bfc4") +
  geom_text(aes(x = 1985, y = 58), label = "Age 15-19", color = "#f8766d") +
  geom_text(aes(x = 1985, y = 33), label = "Age 35-39", color = "#619cff") +
  geom_text(aes(x = 1985, y = 10), label = "Age 40-44", color = "#f564e3") +
  theme_classic() +
  theme(legend.position = "none")
```

Unlike the figures discussed previously, @fig-2b examines US birth rate trends concerning the mother's level of education, focusing on the period from 1992 to 2019 and women aged 20 to 44.

The subgroup with the highest birth rate consistently comprises mothers without a high school degree. Peaking in 2006 at 125.0 births per 1000 women, this subgroup witnessed its lowest birth rate of 89.0 in 1996. Notably, it also exhibited the most fluctuations, maintaining relative stability from 1992 to 2005 with a slight downturn from 1994 to 1997. Then, it experienced rapid growth in 2006, sustaining similar birth rates over the following three years before declining. From 2010 to 2019, the birth rate returned to levels observed from 1992 to 2005.

Mothers who have graduated high school are the sub-group with the most stable birth rate. This sub-group experienced its highest birth rate in 2008, with 77.4 births per 1000 women. Conversely, the lowest birth rate of 68.0 births occurred in 1997.

Similar to the previous sub-group, mothers with some college education have maintained a relatively stable birth rate, while showing a slightly positive trend over the years. The lowest birth rate can be attributed to the year 1994, with 49.4 births per 1000 women, and the highest birth rate was recorded in 2015, at 65.5 births. This is also the sub-group that has historically had the lowest birth average rate. 

Lastly, the college graduates sub-group has also remained stable, showcasing a slight declining trend from 2016 onward. This sub-group's birth rate peaked in 2000 76.7 births per 1000 women. The lowest recorded birthrate was 59.4 in 2019.
```{r graph2b, fig.cap="Trends in Birth Rates by Mother's Level of Education (ages 20-44)"}
#| echo: false
#| message: false
#| warning: false
#| label: fig-2b

# replicate figure 2d from the original paper
fig_2d_data_long %>% ggplot(aes(x = year, y = Birth_Rate, color = Education_Level)) +
  geom_line(size = 1) +
  labs(x = "Year", y = "Births per 1,000 women in \n relevant population subgroup", color = "Education Level") +
  scale_y_continuous(limits = c(0, 140), breaks = seq(0, 150, by = 20)) +
  scale_x_continuous(limits = c(1990, 2020), breaks = seq(1990, 2020, by = 5)) +
  geom_text(aes(x = 1993, y = 112), label = "No high school degree", color = "#7cae00", hjust = 0) +
  geom_text(aes(x = 1993, y = 82), label = "College graduate", color = "#f8766d", hjust = 0) +
  theme_classic() +
  geom_text(aes(x = 1993, y = 62), label = "High school graduate", color = "#00bfc4", hjust = 0) +
  geom_text(aes(x = 1993, y = 45), label = "Some college", color = "#c77cff", hjust = 0) +
  theme_classic() +
  theme(legend.position = "none")
```

```{r graph2c, fig.cap="Trends in Birth Rates by Parity (ages 15-44)"}
#| echo: false
#| message: false
#| warning: false
#| label: fig-2c

# replicate figure 2f from the original paper
merged_data_long %>% ggplot(aes(x = year, y = round(Birth_Rate, digits = 1), color = Parity)) +
  geom_line(size = 1, stat = "summary", fun = mean) +
  labs(x = "Year", y = "Births per 1,000 women in \n relevant population subgroup", color = "Parity") +
  scale_y_continuous(limits = c(0, 40), breaks = seq(0, 40, by = 10)) +
  scale_x_continuous(limits = c(1990, 2020), breaks = seq(1990, 2020, by = 5)) +
  geom_text(aes(x = 1993, y = 28), label = "First birth", color = "#f8766d", hjust = 0) +
  geom_text(aes(x = 1993, y = 23), label = "Second birth", color = "#00bfc4", hjust = 0) +
  geom_text(aes(x = 1993, y = 12.5), label = "Third Birth", color = "#c77cff", hjust = 0) +
  geom_text(aes(x = 1993, y = 8.5), label = "Fourth+ birth", color = "#7cae00", hjust = 0) +
  theme_classic() +
  theme(legend.position = "none")
```

```{r graph3, fig.cap="Children Ever Born by Mother's Age and Birth Cohort"}
#| echo: false
#| message: false
#| warning: false
#| label: fig-3

# replicate figure 5 from the original paper
# code to replicate figure 5 from: https://github.com/KCtt457/us-birth-rates-decline
nchs_cohort_data %>%
  ggplot(aes(x = mage,
             y = cum_brate,
             color = cohort_years)) +
  geom_line(size = 1) +
  labs(x = "Mother's age", y = "Children ever born", color = "Birth cohorts") +
  scale_y_continuous(limits=c(0, 2.5), breaks=seq(0, 2.5, by = .5)) +
  scale_x_continuous(limits=c(15, 44), breaks=seq(15, 44, by = 1)) +
  theme_classic() + 
  theme(legend.background = element_blank(), legend.box.background = element_rect(), legend.position = c(0.85,0.4), axis.text.x = element_text(angle = 45, hjust = 1))
```
# References

